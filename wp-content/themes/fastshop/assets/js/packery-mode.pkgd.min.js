/*
 * Packery layout mode PACKAGED v2.0.0
 * sub-classes Packery
 */
(function(b,a){if(typeof define=="function"&&define.amd){define("packery/js/rect",a)}else{if(typeof module=="object"&&module.exports){module.exports=a()}else{b.Packery=b.Packery||{};b.Packery.Rect=a()}}}(window,function factory(){function b(d){for(var c in b.defaults){this[c]=b.defaults[c]}for(c in d){this[c]=d[c]}}b.defaults={x:0,y:0,width:0,height:0};var a=b.prototype;a.contains=function(e){var d=e.width||0;var c=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+d&&this.y+this.height>=e.y+c};a.overlaps=function(c){var g=this.x+this.width;var f=this.y+this.height;var e=c.x+c.width;var d=c.y+c.height;return this.x<e&&g>c.x&&this.y<d&&f>c.y};a.getMaximalFreeRects=function(e){if(!this.overlaps(e)){return false}var d=[];var c;var i=this.x+this.width;var h=this.y+this.height;var g=e.x+e.width;var f=e.y+e.height;if(this.y<e.y){c=new b({x:this.x,y:this.y,width:this.width,height:e.y-this.y});d.push(c)}if(i>g){c=new b({x:g,y:this.y,width:i-g,height:this.height});d.push(c)}if(h>f){c=new b({x:this.x,y:f,width:this.width,height:h-f});d.push(c)}if(this.x<e.x){c=new b({x:this.x,y:this.y,width:e.x-this.x,height:this.height});d.push(c)}return d};a.canFit=function(c){return this.width>=c.width&&this.height>=c.height};return b}));(function(c,a){if(typeof define=="function"&&define.amd){define("packery/js/packer",["./rect"],a)}else{if(typeof module=="object"&&module.exports){module.exports=a(require("./rect"))}else{var b=c.Packery=c.Packery||{};b.Packer=a(b.Rect)}}}(window,function factory(c){function a(g,e,f){this.width=g||0;this.height=e||0;this.sortDirection=f||"downwardLeftToRight";this.reset()}var b=a.prototype;b.reset=function(){this.spaces=[];var e=new c({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e);this.sorter=d[this.sortDirection]||d.downwardLeftToRight};b.pack=function(f){for(var e=0;e<this.spaces.length;e++){var g=this.spaces[e];if(g.canFit(f)){this.placeInSpace(f,g);break}}};b.columnPack=function(g){for(var f=0;f<this.spaces.length;f++){var h=this.spaces[f];var e=h.x<=g.x&&h.x+h.width>=g.x+g.width&&h.height>=g.height-0.01;if(e){g.y=h.y;this.placed(g);break}}};b.rowPack=function(g){for(var f=0;f<this.spaces.length;f++){var h=this.spaces[f];var e=h.y<=g.y&&h.y+h.height>=g.y+g.height&&h.width>=g.width-0.01;if(e){g.x=h.x;this.placed(g);break}}};b.placeInSpace=function(e,f){e.x=f.x;e.y=f.y;this.placed(e)};b.placed=function(g){var h=[];for(var e=0;e<this.spaces.length;e++){var j=this.spaces[e];var f=j.getMaximalFreeRects(g);if(f){h.push.apply(h,f)}else{h.push(j)}}this.spaces=h;this.mergeSortSpaces()};b.mergeSortSpaces=function(){a.mergeRects(this.spaces);this.spaces.sort(this.sorter)};b.addSpace=function(e){this.spaces.push(e);this.mergeSortSpaces()};a.mergeRects=function(k){var f=0;var h=k[f];rectLoop:while(h){var g=0;var e=k[f+g];while(e){if(e==h){g++}else{if(e.contains(h)){k.splice(f,1);h=k[f];continue rectLoop}else{if(h.contains(e)){k.splice(f+g,1)}else{g++}}}e=k[f+g]}f++;h=k[f]}return k};var d={downwardLeftToRight:function(e,f){return e.y-f.y||e.x-f.x},rightwardTopToBottom:function(e,f){return e.x-f.x||e.y-f.y}};return a}));(function(b,a){if(typeof define=="function"&&define.amd){define("packery/js/item",["outlayer/outlayer","./rect"],a)}else{if(typeof module=="object"&&module.exports){module.exports=a(require("outlayer"),require("./rect"))}else{b.Packery.Item=a(b.Outlayer,b.Packery.Rect)}}}(window,function factory(e,h){var c=document.documentElement.style;var i=typeof c.transform=="string"?"transform":"WebkitTransform";var d=function f(){e.Item.apply(this,arguments)};var g=d.prototype=Object.create(e.Item.prototype);var a=g._create;g._create=function(){a.call(this);this.rect=new h()};var b=g.moveTo;g.moveTo=function(m,n){var k=Math.abs(this.position.x-m);var l=Math.abs(this.position.y-n);var j=this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&k<1&&l<1;if(j){this.goTo(m,n);return}b.apply(this,arguments)};g.enablePlacing=function(){this.removeTransitionStyles();if(this.isTransitioning&&i){this.element.style[i]="none"}this.isTransitioning=false;this.getSize();this.layout._setRectSize(this.element,this.rect);this.isPlacing=true};g.disablePlacing=function(){this.isPlacing=false};g.removeElem=function(){this.element.parentNode.removeChild(this.element);this.layout.packer.addSpace(this.rect);this.emitEvent("remove",[this])};g.showDropPlaceholder=function(){var j=this.dropPlaceholder;if(!j){j=this.dropPlaceholder=document.createElement("div");j.className="packery-drop-placeholder";j.style.position="absolute"}j.style.width=this.size.width+"px";j.style.height=this.size.height+"px";this.positionDropPlaceholder();this.layout.element.appendChild(j)};g.positionDropPlaceholder=function(){this.dropPlaceholder.style[i]="translate("+this.rect.x+"px, "+this.rect.y+"px)"};g.hideDropPlaceholder=function(){this.layout.element.removeChild(this.dropPlaceholder)};return d}));
/*
 * Packery v2.0.0
 * Gapless, draggable grid layouts
 *
 * Licensed GPLv3 for open source use
 * or Packery Commercial License for commercial use
 *
 * http://packery.metafizzy.co
 * Copyright 2016 Metafizzy
 */
(function(b,a){if(typeof define=="function"&&define.amd){define("packery/js/packery",["get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],a)}else{if(typeof module=="object"&&module.exports){module.exports=a(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item"))}else{b.Packery=a(b.getSize,b.Outlayer,b.Packery.Rect,b.Packery.Packer,b.Packery.Item)}}}(window,function factory(d,g,k,h,f){k.prototype.canFit=function(m){return this.width>=m.width-1&&this.height>=m.height-1};var i=g.create("packery");i.Item=f;var j=i.prototype;j._create=function(){g.prototype._create.call(this);this.packer=new h();this.shiftPacker=new h();this.isEnabled=true;this.dragItemCount=0;var m=this;this.handleDraggabilly={dragStart:function(){m.itemDragStart(this.element)},dragMove:function(){m.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){m.itemDragEnd(this.element)}};this.handleUIDraggable={start:function o(q,r){if(!r){return}m.itemDragStart(q.currentTarget)},drag:function n(q,r){if(!r){return}m.itemDragMove(q.currentTarget,r.position.left,r.position.top)},stop:function p(q,r){if(!r){return}m.itemDragEnd(q.currentTarget)}}};j._resetLayout=function(){this.getSize();this._getMeasurements();var o,m,n;if(this._getOption("horizontal")){o=Infinity;m=this.size.innerHeight+this.gutter;n="rightwardTopToBottom"}else{o=this.size.innerWidth+this.gutter;m=Infinity;n="downwardLeftToRight"}this.packer.width=this.shiftPacker.width=o;this.packer.height=this.shiftPacker.height=m;this.packer.sortDirection=this.shiftPacker.sortDirection=n;this.packer.reset();this.maxY=0;this.maxX=0};j._getMeasurements=function(){this._getMeasurement("columnWidth","width");this._getMeasurement("rowHeight","height");this._getMeasurement("gutter","width")};j._getItemLayoutPosition=function(m){this._setRectSize(m.element,m.rect);if(this.isShifting||this.dragItemCount>0){var n=this._getPackMethod();this.packer[n](m.rect)}else{this.packer.pack(m.rect)}this._setMaxXY(m.rect);return m.rect};j.shiftLayout=function(){this.isShifting=true;this.layout();delete this.isShifting};j._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"};j._setMaxXY=function(m){this.maxX=Math.max(m.x+m.width,this.maxX);this.maxY=Math.max(m.y+m.height,this.maxY)};j._setRectSize=function(m,o){var p=d(m);var q=p.outerWidth;var n=p.outerHeight;if(q||n){q=this._applyGridGutter(q,this.columnWidth);n=this._applyGridGutter(n,this.rowHeight)}o.width=Math.min(q,this.packer.width);o.height=Math.min(n,this.packer.height)};j._applyGridGutter=function(o,m){if(!m){return o+this.gutter}m+=this.gutter;var p=o%m;var n=p&&p<1?"round":"ceil";o=Math[n](o/m)*m;return o};j._getContainerSize=function(){if(this._getOption("horizontal")){return{width:this.maxX-this.gutter}}else{return{height:this.maxY-this.gutter}}};j._manageStamp=function(m){var n=this.getItem(m);var p;if(n&&n.isPlacing){p=n.rect}else{var o=this._getElementOffset(m);p=new k({x:this._getOption("originLeft")?o.left:o.right,y:this._getOption("originTop")?o.top:o.bottom})}this._setRectSize(m,p);this.packer.placed(p);this._setMaxXY(p)};function l(m,n){return m.position.y-n.position.y||m.position.x-n.position.x}function e(m,n){return m.position.x-n.position.x||m.position.y-n.position.y}j.sortItemsByPosition=function(){var m=this._getOption("horizontal")?e:l;this.items.sort(m)};j.fit=function(m,o,p){var n=this.getItem(m);if(!n){return}this.stamp(n.element);n.enablePlacing();this.updateShiftTargets(n);o=o===undefined?n.rect.x:o;p=p===undefined?n.rect.y:p;this.shift(n,o,p);this._bindFitEvents(n);n.moveTo(n.rect.x,n.rect.y);this.shiftLayout();this.unstamp(n.element);this.sortItemsByPosition();n.disablePlacing()};j._bindFitEvents=function(n){var m=this;var p=0;function o(){p++;if(p!=2){return}m.dispatchEvent("fitComplete",null,[n])}n.once("layout",o);this.once("layoutComplete",o)};j.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}if(this.options.shiftPercentResize){this.resizeShiftPercentLayout()}else{this.layout()}};j.needsResizeLayout=function(){var n=d(this.element);var m=this._getOption("horizontal")?"innerHeight":"innerWidth";return n[m]!=this.size[m]};j.resizeShiftPercentLayout=function(){var r=this._getItemsForLayout(this.items);var q=this._getOption("horizontal");var m=q?"y":"x";var s=q?"height":"width";var v=q?"rowHeight":"columnWidth";var p=q?"innerHeight":"innerWidth";var t=this[v];t=t&&t+this.gutter;if(t){this._getMeasurements();var n=this[v]+this.gutter;r.forEach(function(w){var x=Math.round(w.rect[m]/t);w.rect[m]=x*n})}else{var o=d(this.element)[p]+this.gutter;var u=this.packer[s];r.forEach(function(w){w.rect[m]=(w.rect[m]/u)*o})}this.shiftLayout()};j.itemDragStart=function(m){if(!this.isEnabled){return}this.stamp(m);var n=this.getItem(m);if(!n){return}n.enablePlacing();n.showDropPlaceholder();this.dragItemCount++;this.updateShiftTargets(n)};j.updateShiftTargets=function(n){this.shiftPacker.reset();this._getBoundingRect();var q=this._getOption("originLeft");var r=this._getOption("originTop");this.stamps.forEach(function(C){var z=this.getItem(C);if(z&&z.isPlacing){return}var A=this._getElementOffset(C);var B=new k({x:q?A.left:A.right,y:r?A.top:A.bottom});this._setRectSize(C,B);this.shiftPacker.placed(B)},this);var p=this._getOption("horizontal");var w=p?"rowHeight":"columnWidth";var t=p?"height":"width";this.shiftTargetKeys=[];this.shiftTargets=[];var m;var v=this[w];v=v&&v+this.gutter;if(v){var x=Math.ceil(n.rect[t]/v);var y=Math.floor((this.shiftPacker[t]+this.gutter)/v);m=(y-x)*v;for(var o=0;o<y;o++){this._addShiftTarget(o*v,0,m)}}else{m=(this.shiftPacker[t]+this.gutter)-n.rect[t];this._addShiftTarget(0,0,m)}var s=this._getItemsForLayout(this.items);var u=this._getPackMethod();s.forEach(function(C){var D=C.rect;this._setRectSize(C.element,D);this.shiftPacker[u](D);this._addShiftTarget(D.x,D.y,m);var z=p?D.x+D.width:D.x;var A=p?D.y:D.y+D.height;this._addShiftTarget(z,A,m);if(v){var E=Math.round(D[t]/v);for(var B=1;B<E;B++){var F=p?z:D.x+v*B;var G=p?D.y+v*B:A;this._addShiftTarget(F,G,m)}}},this)};j._addShiftTarget=function(q,r,m){var n=this._getOption("horizontal")?r:q;if(n!==0&&n>m){return}var p=q+","+r;var o=this.shiftTargetKeys.indexOf(p)!=-1;if(o){return}this.shiftTargetKeys.push(p);this.shiftTargets.push({x:q,y:r})};j.shift=function(m,q,r){var p;var n=Infinity;var o={x:q,y:r};this.shiftTargets.forEach(function(t){var s=c(t,o);if(s<n){p=t;n=s}});m.rect.x=p.x;m.rect.y=p.y};function c(m,n){var o=n.x-m.x;var p=n.y-m.y;return Math.sqrt(o*o+p*p)}var b=120;j.itemDragMove=function(n,r,s){var o=this.isEnabled&&this.getItem(n);if(!o){return}r-=this.size.paddingLeft;s-=this.size.paddingTop;var m=this;function q(){m.shift(o,r,s);o.positionDropPlaceholder();m.layout()}var p=new Date();if(this._itemDragTime&&p-this._itemDragTime<b){clearTimeout(this.dragTimeout);this.dragTimeout=setTimeout(q,b)}else{q();this._itemDragTime=p}};j.itemDragEnd=function(o){var p=this.isEnabled&&this.getItem(o);if(!p){return}clearTimeout(this.dragTimeout);p.element.classList.add("is-positioning-post-drag");var n=0;var m=this;function q(){n++;if(n!=2){return}p.element.classList.remove("is-positioning-post-drag");p.hideDropPlaceholder();m.dispatchEvent("dragItemPositioned",null,[p])}p.once("layout",q);this.once("layoutComplete",q);p.moveTo(p.rect.x,p.rect.y);this.layout();this.dragItemCount=Math.max(0,this.dragItemCount-1);this.sortItemsByPosition();p.disablePlacing();this.unstamp(p.element)};j.bindDraggabillyEvents=function(m){this._bindDraggabillyEvents(m,"on")};j.unbindDraggabillyEvents=function(m){this._bindDraggabillyEvents(m,"off")};j._bindDraggabillyEvents=function(m,o){var n=this.handleDraggabilly;m[o]("dragStart",n.dragStart);m[o]("dragMove",n.dragMove);m[o]("dragEnd",n.dragEnd)};j.bindUIDraggableEvents=function(m){this._bindUIDraggableEvents(m,"on")};j.unbindUIDraggableEvents=function(m){this._bindUIDraggableEvents(m,"off")};j._bindUIDraggableEvents=function(m,o){var n=this.handleUIDraggable;m[o]("dragstart",n.start)[o]("drag",n.drag)[o]("dragstop",n.stop)};var a=j.destroy;j.destroy=function(){a.apply(this,arguments);this.isEnabled=false};i.Rect=k;i.Packer=h;return i}));
/*
 * Packery layout mode v2.0.0
 * sub-classes Packery
 */
(function(b,a){if(typeof define=="function"&&define.amd){define(["isotope/js/layout-mode","packery/js/packery"],a)}else{if(typeof module=="object"&&module.exports){module.exports=a(require("isotope-layout/js/layout-mode"),require("packery"))}else{a(b.Isotope.LayoutMode,b.Packery)}}}(window,function factor(f,h){var i=f.create("packery");var j=i.prototype;var e={_getElementOffset:true,_getMeasurement:true};for(var g in h.prototype){if(!e[g]){j[g]=h.prototype[g]}}var d=j._resetLayout;j._resetLayout=function(){this.packer=this.packer||new h.Packer();this.shiftPacker=this.shiftPacker||new h.Packer();d.apply(this,arguments)};var a=j._getItemLayoutPosition;j._getItemLayoutPosition=function(k){k.rect=k.rect||new h.Rect();return a.call(this,k)};var c=j.needsResizeLayout;j.needsResizeLayout=function(){if(this._getOption("horizontal")){return this.needsVerticalResizeLayout()}else{return c.call(this)}};var b=j._getOption;j._getOption=function(k){if(k=="horizontal"){return this.options.isHorizontal!==undefined?this.options.isHorizontal:this.options.horizontal}return b.apply(this.isotope,arguments)};return i}));